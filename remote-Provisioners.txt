provider "aws" {
  region = "your-region"
}

variable "instance_id" {
  description = "EC2 instance ID where commands will be executed"
}

resource "aws_ssm_document" "example" {
  name          = "example-ssm-document"
  document_type = "Command"
  content       = <<CONTENT
{
  "schemaVersion": "1.2",
  "description": "Example SSM document to execute commands",
  "parameters": {},
  "runtimeConfig": {
    "aws:runShellScript": {
      "properties": [
        {
          "id": "0.aws:runShellScript",
          "runCommand": [
            "echo 'Running script on the EC2 instance'",
            // Add more commands as needed
          ]
        }
      ]
    }
  }
}
CONTENT
}

resource "aws_ssm_association" "run_commands" {
  name        = "execute-commands"
  instance_id = var.instance_id
  document_version = aws_ssm_document.example.latest_version
}
